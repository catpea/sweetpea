<!doctype html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sweetpea &middot; Signal and Web Component Enhanced Web Apps</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçà</text></svg>">
    <script type="importmap">
    {
      "imports": {
        "state-machine": "./src/plug-ins/state-machine/StateMachine.js",
        "event-emitter": "./src/plug-ins/event-emitter/EventEmitter.js",

        "theoretical": "./src/plug-ins/theoretical/index.js",
        "masticator": "./src/plug-ins/masticator/index.js",

        "water-closet": "./src/plug-ins/water-closet/WaterCloset.js"
      }
    }
    </script>
    <style>
    </style>
  </head>
  <script type="module">

    import masticator from 'masticator';
    // import {BindElement} from './src/plugins/elements/index.js';
    import {StageElement, CableElement, ValveElement, ActorElement} from 'theoretical';

    await masticator('css/style.css', 'css/bootstrap.min.css','css/bootstrap-icons.min.css');

    // customElements.define('x-bind', BindElement);
    customElements.define('x-stage', StageElement);
    customElements.define('x-actor', ActorElement);
    // customElements.define('x-valve', ValveElement);
    // customElements.define('x-cable', CableElement);



  </script>

  <body>

    <x-stage src="templates/my-program.json" controls minimap template="stage">

      <x-actor id="a" template="fetch"></x-actor>
      <x-actor id="b" template="parse"></x-actor>
      <x-cable link="a:out b:in"></x-cable>
      
    </x-stage>

  </body>

  <template id="stage">
    <style>
      :host {
        display: block;
        overflow: hidden;
        position: relative;

        touch-action: none;
        user-select: none;
      }
      .content {
          transform-origin: 0 0;
          /* adds smoothness: transition: transform 0.1s; */
      }
    </style>
    <div class="content" style="min-height: 75vh;">
    <svg class="position-absolute overflow-visible w-100 h-100" xmlns="http://www.w3.org/2000/svg"></svg>
    <slot></slot>
    </div>
  </template>

  <template id="port">
    <style>
      .port {
      }
    </style>
    <span use="connectable" class="port position-absolute p-1 top-50 {{direction=='out'?'start-100':'start-0'}} translate-middle badge rounded-pill bg-success shadow-sm"><i class="bi bi-{{icon}}"></i></span>
  </template>

  <template id="fetch">
    <style>
      .card {
        width: 18rem;
        position: absolute;
        top: 150px;
        left: 50px;
      }
    </style>
    <div class="card shadow" use="movable">
      <div class="card-header drag-handle">
        JSON Fetch
      </div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">
          <x-valve id="out" direction="out" icon="lightning"></x-valve>
          <div class="form-floating">
            <input type="text" class="form-control" id="floatingInput">
            <x-bind name="url" closest="input"></x-bind>
            <label for="floatingInput">URL</label>
          </div>
        </li>
        <li class="list-group-item">...</li>
      </ul>
      <div class="card-footer text-wrap">
        <small>
          Will download data from <span>???</span> upon play.
          <x-bind name="url" closest="span"></x-bind>
        </small>
      </div>
    </div>
  </template>

  <template id="parse">
    <style>
      .card {
        width: 18rem;
        position: absolute;
        top: 150px;
        left: 50px;
      }
    </style>
    <div class="card shadow" use="movable">
      <div class="card-header drag-handle">
        Parse Data
      </div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">
          <x-valve id="out" direction="in" icon="lightning"></x-valve>
          <div class="form-floating">
            <input type="text" class="form-control" id="floatingInput">
            <x-bind name="url" closest="input"></x-bind>
            <label for="floatingInput">URL</label>
          </div>
        </li>
        <li class="list-group-item">...</li>
      </ul>
      <div class="card-footer text-wrap">
        <small>
          Will download data from <span>???</span> upon play.
          <x-bind name="url" closest="span"></x-bind>
        </small>
      </div>
    </div>
  </template>

</html>
