<!doctype html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sweetpea &middot; Signal and Web Component Enhanced Web Apps</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçà</text></svg>">
    <script type="importmap">
    {
      "imports": {
        "actor": "./src/plug-ins/actor/Actor.js",

        "state-machine": "./src/plug-ins/state-machine/StateMachine.js",
        "event-emitter": "./src/plug-ins/event-emitter/EventEmitter.js",

        "movable": "./src/plug-ins/mouse/Movable.js",
        "connectable": "./src/plug-ins/mouse/Connectable.js",

        "theoretical": "./src/plug-ins/theoretical/index.js",
        "masticator": "./src/plug-ins/masticator/index.js",
        "signal": "./src/plug-ins/signal/Signal.js",

        "water-closet": "./src/plug-ins/water-closet/WaterCloset.js"
      }
    }
    </script>
    <style>
    body { background-color: #123; }
    </style>
  </head>
  <script type="module">

    globalThis.sweetpea = {
      prefix: 'x',
    };

    import masticator from 'masticator';
    // import {BindElement} from './src/plugins/elements/index.js';
    import {StageElement, CableElement, ValveElement, SuperElement} from 'theoretical';

    await masticator('css/style.css', 'css/bootstrap.min.css','css/bootstrap-icons.min.css');
    await StageElement.load();
    await ValveElement.load();
    await CableElement.load();
    await SuperElement.load();

    // RISC
    customElements.define(`${globalThis.sweetpea.prefix}-stage`, StageElement);
    customElements.define(`${globalThis.sweetpea.prefix}-valve`, ValveElement);
    customElements.define(`${globalThis.sweetpea.prefix}-cable`, CableElement);
    customElements.define(`${globalThis.sweetpea.prefix}-super`, SuperElement);

  </script>

  <script src="css/bootstrap.bundle.min.js"></script>
  <script>

  </script>

  <body style="">


    <x-stage controls minimap template="stage">

      <x-super id="xena" x="90" y="63" worker="http/fetch" data-url="./menu.json"> </x-super>
      <x-super id="troi" x="510" y="161" worker="object/parse"> </x-super>
      <x-super id="bork" x="935" y="87" worker="data/write"> </x-super>

      <x-cable from="xena:out" to="troi:in"></x-cable>
      <x-cable from="troi:out" to="bork:in"></x-cable>

    </x-stage>





<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-fullscreen modal-dialog-scrollable">


      <div class="modal-content">
            <div class="modal-body px-0">
              <div class="container-fluid">

                 <div class="row">
                   <div class="col px-0 pt-3">

                     <ul class="nav nav-tabs">
                      <li class="nav-item">
                        <button class="nav-link active ms-3" aria-current="page">Library</button>
                      </li>
                      <!-- <li class="nav-item">
                        <button class="nav-link">Code Editor</button>
                      </li> -->
                      <li class="nav-item">
                        <button class="nav-link">Intelligent Composer</button>
                      </li>

                    </ul>


                   </div>
                 </div>

                 <div class="row">

                   <div class="col-3 ps-3 pt-4">

                     <h5 class="mb-1 p-3">
                       Categories
                       <small class="d-block text-body-secondary">With faded secondary text</small>
                     </h5>









                     <nav class="nav flex-column">
                       <a class="nav-link" href="#"><i class="bi bi-filter-right me-2 text-secondary"></i> Most Used</a>
                       <a class="nav-link" href="#"><i class="bi bi-gear me-2 text-secondary"></i> Recently Added</a>
                       <a class="nav-link mb-3 border-bottom" href="#"><i class="bi bi-flower3 me-2 text-secondary"></i> Your Tags</a>
                       <a class="nav-link active" aria-current="page" href="#"><i class="bi bi-fuel-pump-diesel-fill me-2 text-secondary"></i> Artificial Intelligence</a>
                       <a class="nav-link" href="#"><i class="bi bi-fuel-pump-diesel me-2 text-secondary"></i> API Calls</a>
                       <a class="nav-link" href="#"><i class="bi bi-geo-alt-fill me-2 text-secondary"></i> Data Processing</a>
                       <a class="nav-link"><i class="bi bi-graph-up me-2 text-secondary"></i> User Interaction</a>
                       <a class="nav-link disabled" aria-disabled="true"><i class="bi bi-grid-3x3 me-2 text-secondary"></i> File Handling</a>
                     </nav>


                   </div>

                   <div class="col-3 pt-4">

                     <h5 class="mb-1 p-3">
                       Functions
                       <small class="d-block text-body-secondary">With faded secondary text</small>
                     </h5>

                     <nav class="nav flex-column">
                       <a class="nav-link active" aria-current="page" href="#"><i class="bi bi-hand-index-fill me-2 text-secondary"></i> Form Submission</a>
                       <a class="nav-link" href="#"><i class="bi bi-hdd-stack-fill me-2 text-secondary"></i> Button Click</a>
                       <a class="nav-link" href="#"><i class="bi bi-hearts me-2 text-secondary"></i> Event Listener</a>
                       <a class="nav-link"><i class="bi bi-house-check-fill me-2 text-secondary"></i> Invoke AI Model</a>
                       <a class="nav-link"><i class="bi bi-houses me-2 text-secondary"></i> Prepare AI Input</a>
                       <a class="nav-link"><i class="bi bi-info-square-fill me-2 text-secondary"></i> Handle AI Response</a>
                     </nav>






                   </div>
                   <div class="col-6 ms-auto pt-4">

                     <div class="card mx-3 placeholder-glow">
                      <img src="..." class="card-img-top placeholder" alt="..." style="height: 8rem;">
                      <div class="card-body">
                        <h5 class="card-title">HTTP GET</h5>
                        <p class="card-text">Fetches data from a specified URL using the GET method: This action involves making a request to a specific web address (URL) to retrieve information from a server. The GET method is one of the most common ways to request data, and it typically involves appending parameters directly to the URL to specify what information is needed. When the server receives the request, it processes it and sends back the requested data, which can be in various formats, such as JSON or XML. This method is particularly useful for retrieving data without making any changes on the server, such as fetching user profiles, product details, or any public data accessible through the web. For novice users, understanding GET requests is fundamental to working with APIs, as they form the basis for interacting with many online services and applications.</p>
                      </div>
                      <ul class="list-group list-group-flush">
                        <li class="list-group-item">An item</li>
                        <li class="list-group-item">A second item</li>
                        <li class="list-group-item">A third item</li>
                      </ul>
                      <div class="card-body">
                        <a href="#" class="card-link">Customize</a>
                        <a href="#" class="card-link">Settings</a>
                      </div>
                    </div>

                   </div>

                 </div>

              </div>










            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Add To Stage</button>
            </div>
          </div>


    </div>
  </div>











  </body>


  <template id="valve">
    <style>
      .valve {
      }
    </style>
    <span use="connectable" class="valve glow-sm d-inline-block position-absolute p-1 top-50 {{direction=='out'?'start-100':'start-0'}} translate-middle badge rounded-pill bg-success"><i class="bi bi-{{icon}}"></i></span>
  </template>



  <template id="parse">
    <script type="app">
      class Main {

        core;
        root;
        data;
        pipe;

        constructor({core, root, pipe, data}){
          this.core = core;
          this.root = root;
          this.pipe = pipe;
          this.data = data;
        }

        mount(){
          this.forgetIn = this.pipe.on('in', packet=>{
            console.log(`Data Change intercepted a packet ${this.core.host.getAttribute('id')}`, packet);
            this.pipe.emit('out', packet)

          })
        }

        destroy(){
          this.forgetIn();
        }

        say(element){
          console.info('Hello from', element);
        }

        flip(component){
          const container = component.searchShadow('.perspective').pop();
          const frontCard = container.querySelector('.primary');
          const backCard = container.querySelector('.secondary');
          component.flipCard(frontCard, backCard);
        }

      }
    </script>
    <style>




    /* card coordinates */
    .movable {
      top: 0px;
      left: 0px;
    }

    /* enable perspective and make the container a relative parent for absolute positioning */
    .perspective {
      perspective: 400px;
      position: relative;
    }

    /* set all width to equal */
    .perspective, .card {
      width: 18rem;
    }

    /* set absolute position, and stack cards relative to .perspective */
    .card {
      position: absolute ! important;
      top: 1px;
      left: 1px;
      backface-visibility: hidden;
    }
    /*
    position: relative;
    transform-style: preserve-3d;
    */


    /* front pane, placed above back */
    .card.primary {
        z-index: 2;
        /* transform: rotateY(0deg); */
    }

    /* back, initially hidden pane */
    .card.secondary {
        transform: rotateY(180deg);
    }

    </style>

    <div class="perspective movable" use="movable">


      <div class="card primary shadow">
        <div class="card-header drag-handle">
          Object Change <button type="button" class="btn btn-sm btn-outline-secondary float-end" onclick="(element, component)=>this.flip(component)"><i class="bi bi-gear"></i></button>
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">

            <x-valve id="in" data-direction="in" data-icon="lightning"></x-valve>
            <x-valve id="out" data-direction="out" data-icon="capsule"></x-valve>

            <div class="form-floating">
              <input type="text" class="form-control" id="floatingInput" value="data.payload = 123">
              <x-bind data-name="url" data-closest="input"></x-bind>
              <label for="floatingInput">code</label>
            </div>
          </li>
          <li class="list-group-item">...</li>
        </ul>
        <div class="card-footer text-wrap">
          <small>
            working on binding
            <!-- Will download data from <span>???</span> upon play.
            <x-bind data-name="url" data-closest="span"></x-bind> -->
          </small>
        </div>
      </div>

      <div class="card secondary shadow">
        <div class="card-header drag-handle">
          Configuration <button type="button" class="btn btn-sm btn-outline-success float-end" onclick="(element, component)=>this.flip(component)"><i class="bi bi-check-circle"></i></button>
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">
            <select class="form-select form-select-sm mb-2">
              <option selected>Worker Category</option>
              <option value="1">HTTP</option>
              <option value="2">JSON</option>
              <option value="3">DATA</option>
            </select>

            <select class="form-select form-select-sm mb-2">
              <option selected>Worker</option>
              <option value="1">Download File</option>
              <option value="2">Save File</option>
              <option value="3">Append To Log</option>
            </select>
          </li>
          <li class="list-group-item">...</li>
        </ul>
        <div class="card-footer text-wrap">
          <small class="muted">
          Configure your component
          </small>
        </div>
      </div>


    </div>
  </template>


  <template id="write">
    <script type="app">
      class Main {

        core;
        root;
        data;
        pipe;

        constructor({core, root, pipe, data}){
          this.core = core;
          this.root = root;
          this.pipe = pipe;
          this.data = data;
        }

        mount(){
          // console.log('MOUNT!!!');
          // this.forgetPlay = this.root.on('play', async ()=>{
          // })
          this.forgetIn = this.pipe.on('in', packet=>{
            console.log(`Data Writer intercepted a packet ${this.core.host.getAttribute('id')}`, packet);
          })
        }

        destroy(){
          this.forgetIn();
        }

        say(element){
          console.info('Hello from', element);
        }

        flip(component){
          const container = component.searchShadow('.perspective').pop();
          const frontCard = container.querySelector('.primary');
          const backCard = container.querySelector('.secondary');
          component.flipCard(frontCard, backCard);
        }

      }
    </script>
    <style>




    /* card coordinates */
    .movable {
      top: 0px;
      left: 0px;
    }

    /* enable perspective and make the container a relative parent for absolute positioning */
    .perspective {
      perspective: 400px;
      position: relative;
    }

    /* set all width to equal */
    .perspective, .card {
      width: 18rem;
    }

    /* set absolute position, and stack cards relative to .perspective */
    .card {
      position: absolute ! important;
      top: 1px;
      left: 1px;
      backface-visibility: hidden;
    }
    /*
    position: relative;
    transform-style: preserve-3d;
    */


    /* front pane, placed above back */
    .card.primary {
        z-index: 2;
        /* transform: rotateY(0deg); */
    }

    /* back, initially hidden pane */
    .card.secondary {
        transform: rotateY(180deg);
    }

    </style>

    <div class="perspective movable" use="movable">


      <div class="card primary shadow">
        <div class="card-header drag-handle">
          Data Writer <button type="button" class="btn btn-sm btn-outline-secondary float-end" onclick="(element, component)=>this.flip(component)"><i class="bi bi-gear"></i></button>
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">

            <x-valve id="in" data-direction="in" data-icon="lightning"></x-valve>

            <div class="form-floating">
              <input type="text" class="form-control" id="floatingInput" value="data.txt">
              <x-bind data-name="url" data-closest="input"></x-bind>
              <label for="floatingInput">file</label>
            </div>
          </li>
          <li class="list-group-item">...</li>
        </ul>
        <div class="card-footer text-wrap">
          <small>
            working on binding
            <!-- Will download data from <span>???</span> upon play.
            <x-bind data-name="url" data-closest="span"></x-bind> -->
          </small>
        </div>
      </div>

      <div class="card secondary shadow">
        <div class="card-header drag-handle">
          Configuration <button type="button" class="btn btn-sm btn-outline-success float-end" onclick="(element, component)=>this.flip(component)"><i class="bi bi-check-circle"></i></button>
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item">
            <select class="form-select form-select-sm mb-2">
              <option selected>Worker Category</option>
              <option value="1">HTTP</option>
              <option value="2">JSON</option>
              <option value="3">DATA</option>
            </select>

            <select class="form-select form-select-sm mb-2">
              <option selected>Worker</option>
              <option value="1">Download File</option>
              <option value="2">Save File</option>
              <option value="3">Append To Log</option>
            </select>
          </li>
          <li class="list-group-item">...</li>
        </ul>
        <div class="card-footer text-wrap">
          <small class="muted">
          Configure your component
          </small>
        </div>
      </div>


    </div>
  </template>


  <template id="worker">

    <script type="app">
      class Main {
        core;
        root;
        data;
        pipe;

        constructor({core, root, pipe, data}){
          this.core = core;
          this.root = root;
          this.data = data;
          this.pipe = pipe;
        }


        mount(){
          this.forgetIn = this.pipe.on('in', packet=>{
            console.log(`Bash intercepted a packet ${this.core.host.getAttribute('id')}`, packet);
          })
        }
        destroy(){
          this.forgetIn()
        }

      }
    </script>
    <style>
      .movable {
        top: 0px;
        left: 0px;
      }
      .card {
        width: 18rem;
        position: absolute;
      }
    </style>
    <div class="card shadow movable" use="movable">
      <div class="card-header drag-handle">
        Parse Data
      </div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">
          <x-valve id="in" data-direction="in" data-icon="lightning"></x-valve>
          Data Parsing...
          <!-- <div class="form-floating">
            <input type="text" class="form-control" id="floatingInput">
            <x-bind data-name="url" data-closest="input"></x-bind>
            <label for="floatingInput">URL</label>
          </div> -->
        </li>
        <li class="list-group-item">...</li>
      </ul>
      <div class="card-footer text-wrap">
        <small>
          binding is under construction
          <!-- Will download data from <span>???</span> upon play.
          <x-bind data-name="url" data-closest="span"></x-bind> -->
        </small>
      </div>
    </div>
  </template>

</html>
